
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Usage &#8212; TurbGen 0.5 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Plotting Tools" href="plotting-tools.html" />
    <link rel="prev" title="Download and Install" href="install.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="usage">
<span id="id1"></span><h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>TurbGen was designed to meet the needs of several different user
groups. To meet that objective it has three primary operational
modes/interfaces. Those modes are described below.  Once TurbGen is
properly <a class="reference internal" href="install.html"><span class="doc">installed</span></a>, all of these modes should work.</p>
<div class="section" id="input-files">
<h2>1) Input files<a class="headerlink" href="#input-files" title="Permalink to this headline">¶</a></h2>
<p>This mode is designed to mimic the <a class="reference internal" href="glossary.html#term-turbsim"><span class="xref std std-term">TurbSim</span></a> interface. It is
designed for use by device developers and other users familiar with
the <a class="reference internal" href="glossary.html#term-turbsim"><span class="xref std std-term">TurbSim</span></a> program who want output that is consistent with
predifined models built into TurbSim. In this mode TurbGen reads
<a class="reference internal" href="glossary.html#term-turbsim"><span class="xref std std-term">TurbSim</span></a> input files and writes out binary data in the same format
as <a class="reference internal" href="glossary.html#term-turbsim"><span class="xref std std-term">TurbSim</span></a>. This mode can be run from a standard (i.e. DOS, UNIX)
command line and is well suited for interfacing with FAST and other
device simulation tools in the same way that <a class="reference internal" href="glossary.html#term-turbsim"><span class="xref std std-term">TurbSim</span></a> does.  For
more information on this mode, see the docstring in the
<a class="reference internal" href="api/TurbGen.runInput.html#module-TurbGen.runInput" title="TurbGen.runInput"><code class="xref py py-mod docutils literal notranslate"><span class="pre">TurbGen.runInput</span></code></a> docstring.</p>
<p>To run TurbGen in this mode on the file ‘TurbSim.inp’ from the
command line do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ TurbGen.py TurbSim.inp
</pre></div>
</div>
<p>Alternatively, this mode can be used from an interactive python shell
by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">TurbGen.runInput.main</span> <span class="k">import</span> <span class="n">readInput</span><span class="p">,</span> <span class="n">run</span><span class="p">,</span> <span class="n">write</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">readInput</span><span class="p">(</span><span class="s1">&#39;TurbSim.inp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tsdat</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write</span><span class="p">(</span><span class="n">tsdat</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="s1">&#39;TurbSim&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>These two approaches produce the same output. The first allows the
user to run TurbGen without ever entering an interactive python
shell, the latter provides the user with an opportunity to view the
output data, <code class="docutils literal notranslate"><span class="pre">tsdat</span></code>, without reloading it from a file.</p>
<p>The source code for this mode is contained in the <a class="reference internal" href="api/TurbGen.runInput.html#module-TurbGen.runInput" title="TurbGen.runInput"><code class="xref py py-mod docutils literal notranslate"><span class="pre">TurbGen.runInput</span></code></a> package.</p>
</div>
<div class="section" id="advanced-programming-interface-api">
<h2>2) Advanced programming interface (API)<a class="headerlink" href="#advanced-programming-interface-api" title="Permalink to this headline">¶</a></h2>
<p>This interface was designed for researchers who wish to develop new
methods and models for simulating turbulence, and/or want to control
the statistics of TurbGen output explicitly. This api is the core
interface of TurbGen (the other two are wrappers).  As a starting point
for using this interface checkout the <a class="reference internal" href="api/TurbGen.html"><span class="doc">API documentation</span></a>. Or start
navigating the api interactively by importing it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">TurbGen.api</span> <span class="k">as</span> <span class="nn">tg</span>
</pre></div>
</div>
<p>More specifically, the <code class="file docutils literal notranslate"><span class="pre">examples/api.py</span></code> file includes an
overview of how to begin using TurbGen. The contents of that file is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This script provides an example usage of the TurbGen API.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># Begin by importing the TurbGen API:</span>
<span class="kn">import</span> <span class="nn">TurbGen.api</span> <span class="k">as</span> <span class="nn">tg</span>

<span class="c1"># Define some variables for the TurbGen run:</span>
<span class="n">refht</span> <span class="o">=</span> <span class="mf">10.</span>
<span class="n">ustar</span> <span class="o">=</span> <span class="mf">0.03</span>
<span class="n">Uref</span> <span class="o">=</span> <span class="mf">3.</span>

<span class="c1"># Initialize a TurbGen run object:</span>
<span class="n">tgr</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">tgrun</span><span class="p">()</span>

<span class="c1"># And give the run object a grid:</span>
<span class="n">tgr</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">RectGrid</span><span class="p">(</span>
    <span class="n">center</span><span class="o">=</span><span class="n">refht</span><span class="p">,</span> <span class="n">ny</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">nz</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">time_sec</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Now we define a mean &#39;profile model&#39;,</span>
<span class="n">prof_model</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">profModels</span><span class="o">.</span><span class="n">h2l</span><span class="p">(</span><span class="n">Uref</span><span class="p">,</span> <span class="n">refht</span><span class="p">,</span> <span class="n">ustar</span><span class="p">)</span>
<span class="c1"># and assign it to the run object,</span>
<span class="n">tgr</span><span class="o">.</span><span class="n">prof</span> <span class="o">=</span> <span class="n">prof_model</span>
<span class="c1"># These two steps can be completed in one as:</span>
<span class="c1">#tgr.profModel=tg.profModels.h2l(U,refht,ustar)</span>

<span class="c1"># Next we define and assign a &#39;spectral model&#39; to the run object,</span>
<span class="n">tgr</span><span class="o">.</span><span class="n">spec</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">specModels</span><span class="o">.</span><span class="n">tidal</span><span class="p">(</span><span class="n">ustar</span><span class="p">,</span> <span class="n">refht</span><span class="p">)</span>

<span class="c1"># ... and define/assign a &#39;coherence model&#39;,</span>
<span class="n">tgr</span><span class="o">.</span><span class="n">cohere</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">cohereModels</span><span class="o">.</span><span class="n">nwtc</span><span class="p">()</span>

<span class="c1"># ... and define/assign a &#39;stress model&#39;,</span>
<span class="n">tgr</span><span class="o">.</span><span class="n">stress</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">stressModels</span><span class="o">.</span><span class="n">tidal</span><span class="p">(</span><span class="n">ustar</span><span class="p">,</span> <span class="n">refht</span><span class="p">)</span>

<span class="c1"># Now simply &#39;call&#39; the run object to generate the output.</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">tgr</span><span class="p">()</span>

<span class="c1"># We can save the output in &#39;bladed&#39; format,</span>
<span class="n">out</span><span class="o">.</span><span class="n">write_bladed</span><span class="p">(</span><span class="s1">&#39;ExampleOutput.bl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-output-files">
<h2>Reading output files<a class="headerlink" href="#reading-output-files" title="Permalink to this headline">¶</a></h2>
<p>TurbGen comes with the ability to read (and write) TurbSim ‘.wnd’, ‘.bl’ (Bladed format) and ‘.bts’ (AeroDyn/TurbSim format) files.  To read these files:
1) ‘import TurbGen.tsio’
2) You can either use:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><code class="xref py py-mod docutils literal notranslate"><span class="pre">TurbGen.io.bladed</span></code> or <code class="xref py py-mod docutils literal notranslate"><span class="pre">TurbGen.io.aerodyn</span></code> to return an
array of the turbulence timeseries, or</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">TurbGen.tsio.readModel()</span></code> to read the appropriate data file, and
also load information from the config (.inp) file to create a
‘tsdata’ object that includes both the array and also the
config and turbModel objects.</li>
</ol>
</div></blockquote>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">TurbGen</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Download and Install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#input-files">1) Input files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-programming-interface-api">2) Advanced programming interface (API)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-output-files">Reading output files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plotting-tools.html">Plotting Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="code-framework.html">Code Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/TurbGen.html">TurbGen package</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="install.html" title="previous chapter">Download and Install</a></li>
      <li>Next: <a href="plotting-tools.html" title="next chapter">Plotting Tools</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, National Renewable Energy Lab.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/usage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>